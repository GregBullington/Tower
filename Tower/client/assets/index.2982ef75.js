var Q=Object.defineProperty;var I=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var N=(a,e,n)=>e in a?Q(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n,q=(a,e)=>{for(var n in e||(e={}))X.call(e,n)&&N(a,n,e[n]);if(I)for(var n of I(e))J.call(e,n)&&N(a,n,e[n]);return a};import{r as Z,c as p,a as y,o as l,b as d,d as t,e as g,F as ee,S as V,f as te,t as b,g as D,h as ne,w as E,p as U,i as L,j as oe,k as ae,l as j,m as se,u as re,n as ie,q as ce,M,s as v,v as w,x as k,y as le,z as H,A as de,B as O,C as ue}from"./vendor.c0c49a3e.js";const me=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=n(r);fetch(r.href,c)}};me();const i=Z({user:{},account:{},events:[],attendees:[],activeEvent:{},attendedEvents:[],comments:[],eventType:""});var h=(a,e)=>{for(const[n,o]of e)a[n]=o;return a};const ve={name:"App",setup(){return{appState:p(()=>i)}}},_e={class:"bg-dark"},pe=t("footer",null,null,-1);function ge(a,e,n,o,r,c){const s=y("Navbar"),f=y("router-view");return l(),d(ee,null,[t("header",null,[g(s)]),t("main",_e,[g(f)]),pe],64)}var be=h(ve,[["render",ge]]);const F=window.location.origin.includes("localhost"),B=F?"http://localhost:3000":"",he="dev-bvbd1gzu.us.auth0.com",fe="https://GregDev.com",ye="uMJXFvYrPZcur5gSo52tcFNhkjQ7QmXr";function C(a,e){if(F)console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(a){case"log":case"assert":return}console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const _={log(){C("log",arguments)},error(){C("error",arguments)},warn(){C("warn",arguments)},assert(){C("assert",arguments)},trace(){C("trace",arguments)}};class x{static async confirm(e="Are you sure?",n="You won't be able to revert this!",o="warning",r="Yes, delete it!"){try{return!!(await V.fire({title:e,text:n,icon:o,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",n="warning",o="top-end",r=3e3,c=!0){V.fire({title:e,icon:n,position:o,timer:r,timerProgressBar:c,toast:!0,showConfirmButton:!1})}}const m=te.create({baseURL:B,timeout:8e3});class Ee{async postComment(e){const n=await m.post("api/comments/",e);_.log(n.data),i.comments=[...i.comments,n.data]}async getTowerEventComments(e){const n=await m.get("api/events/"+e+"/comments");i.comments=n.data}async removeComment(e){await m.delete("api/comments/"+e),i.comments=i.comments.filter(n=>n.id!==e)}}const we=new Ee,Ce={props:{comment:Object},setup(){return{account:p(()=>i.account),async removeComment(a){try{await x.confirm("You are removing a comment, Are you sure?")&&await we.removeComment(a)}catch(e){_.error(e),x.toast("Somthing went wrong removing comment!","error")}}}}},ke={class:"row justify-content-center m-2"},xe={class:"col-md-2 d-flex justify-content-center"},Te=["src","title"],Se={class:"col-md-10 card bg-dark"},Ae={class:"row"},$e={class:"col-6"},De={class:"col-6 text-end"},Oe={class:"row"},Re={class:"col"};function Pe(a,e,n,o,r,c){return l(),d("div",ke,[t("div",xe,[t("img",{class:"img-container",src:n.comment.creator.picture,alt:"profile picture",title:n.comment.creator.name},null,8,Te)]),t("div",Se,[t("div",Ae,[t("div",$e,[t("p",null,[t("b",null,b(n.comment.creator.name),1)])]),t("div",De,[o.account.id==n.comment.creator.id?(l(),d("i",{key:0,class:"mdi mdi-delete-forever text-danger mdi-24px selectable",onClick:e[0]||(e[0]=s=>o.removeComment(n.comment.id)),title:"Remove Comment"})):D("",!0)])]),t("div",Oe,[t("div",Re,[t("p",null,b(n.comment.body),1)])])])])}var Ie=h(Ce,[["render",Pe]]),Ne=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ie});const qe={props:{event:Object},setup(a){return{account:p(()=>i.account),events:p(()=>i.events),setActiveEvent(){i.activeEvent=a.event}}}},z=a=>(U("data-v-3d10f68e"),a=a(),L(),a),Ve=["title"],Ue=["src"],Le={key:0,class:"text-danger at-cap"},je=z(()=>t("p",{class:"p-0 m-0"},[t("b",null,"CANCELED")],-1)),Me=[je],He={key:1},Fe={key:2,class:"text-danger at-cap"},Be=z(()=>t("p",{class:"p-0 m-0"},[t("b",null,"AT CAPACITY")],-1)),ze=[Be];function Ye(a,e,n,o,r,c){const s=y("router-link");return l(),ne(s,{to:{name:"EventDetails",params:{id:n.event.id}}},{default:E(()=>[t("div",{class:"card elevation-2 bg-secondary mb-5 p-1 selectable",onClick:e[0]||(e[0]=f=>o.setActiveEvent()),title:n.event.name},[t("img",{class:"standard-height",src:n.event.coverImg,alt:"event cover image"},null,8,Ue),t("h4",null,b(n.event.name),1),t("p",null,b(n.event.location),1),t("p",null,b(new Date(n.event.startDate).toDateString()),1),n.event.isCanceled?(l(),d("span",Le,Me)):n.event.capacity>0?(l(),d("span",He," Available Capacity: "+b(n.event.capacity),1)):n.event.capacity<=0?(l(),d("span",Fe,ze)):D("",!0)],8,Ve)]),_:1},8,["to"])}var Ke=h(qe,[["render",Ye],["__scopeId","data-v-3d10f68e"]]),We=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ke});const Ge="modulepreload",Y={},Qe="/",T=function(e,n){return!n||n.length===0?e():Promise.all(n.map(o=>{if(o=`${Qe}${o}`,o in Y)return;Y[o]=!0;const r=o.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${c}`))return;const s=document.createElement("link");if(s.rel=r?"stylesheet":Ge,r||(s.as="script",s.crossOrigin=""),s.href=o,document.head.appendChild(s),r)return new Promise((f,A)=>{s.addEventListener("load",f),s.addEventListener("error",A)})})).then(()=>e())};function Xe(a){switch(a){case"./pages/AboutPage.vue":return T(()=>import("./AboutPage.0c5c7024.js"),["assets/AboutPage.0c5c7024.js","assets/vendor.c0c49a3e.js"]);case"./pages/AccountPage.vue":return T(()=>import("./AccountPage.99263aeb.js"),["assets/AccountPage.99263aeb.js","assets/AccountPage.faf1d637.css","assets/AttendeesService.65e5314c.js","assets/vendor.c0c49a3e.js"]);case"./pages/EventDetailsPage.vue":return T(()=>import("./EventDetailsPage.6dca5953.js"),["assets/EventDetailsPage.6dca5953.js","assets/EventDetailsPage.a08307b7.css","assets/vendor.c0c49a3e.js","assets/AttendeesService.65e5314c.js"]);case"./pages/HomePage.vue":return T(()=>import("./HomePage.ee681e48.js"),["assets/HomePage.ee681e48.js","assets/HomePage.68ec540d.css","assets/vendor.c0c49a3e.js"]);default:return new Promise(function(e,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+a)))})}}function R(a){return()=>Xe(`./pages/${a}.vue`)}const Je=[{path:"/",name:"Home",component:R("HomePage"),beforeEnter:j},{path:"/eventdetails/:id",name:"EventDetails",component:R("EventDetailsPage"),beforeEnter:j},{path:"/account",name:"Account",component:R("AccountPage"),beforeEnter:se}],P=oe({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:ae(),routes:Je});class Ze{async getAllTowerEvents(){const e=await m.get("api/events");i.events=e.data}async createEvent(e){const n=await m.post("api/events",e);i.events=[...i.events,n.data],i.activeEvent=n.data,P.push({name:"EventDetails",params:{id:n.data.id}})}async getActiveTowerEvent(e){const n=await m.get("api/events/"+e);i.activeEvent=n.data}async cancelTowerEvent(e){await m.delete("api/events/"+e.id,e),i.events=i.events.filter(n=>n.id!==i.events.id),this.getActiveTowerEvent(e.id)}async editEvent(e){const o=(await m.put("api/events/"+e.id,e)).data;i.activeEvent=o}}const K=new Ze,et={props:{event:Object},setup(a){re();const e=ie({});return ce(()=>{e.value=q({},a.event)}),{activeEvent:p(()=>i.activeEvent),editable:e,async handleSubmit(){try{e.value.id?await K.editEvent(e.value):(await K.createEvent(e.value),e.value={}),M.getOrCreateInstance(document.getElementById("editEventForm")).hide(),M.getOrCreateInstance(document.getElementById("eventForm")).hide()}catch(n){_.error(n),x.toast("Something went wrong creating Event!","error")}}}}},tt={class:"row"},nt={class:"col"},ot={class:"row"},at={class:"col mt-3"},st={class:"row"},rt={class:"col mt-3"},it={class:"row"},ct=t("p",{class:"mb-1 mt-3"}," Select Event Type ",-1),lt={class:"col-md-6"},dt={class:"form-check form-check-inline"},ut=t("label",{class:"form-check-label",for:"inlineRadio1"},"Concert",-1),mt={class:"form-check form-check-inline"},vt=t("label",{class:"form-check-label",for:"inlineRadio2"},"Convention",-1),_t={class:"form-check form-check-inline"},pt=t("label",{class:"form-check-label",for:"inlineRadio2"},"Sport",-1),gt={class:"form-check form-check-inline"},bt=t("label",{class:"form-check-label",for:"inlineRadio2"},"Digital",-1),ht={class:"row"},ft={class:"col mt-3"},yt={class:"row"},Et={class:"col mt-3"},wt={class:"row"},Ct={class:"col mt-3"},kt={class:"row"},xt={class:"col-md-6 mt-3 mb-3"},Tt=t("div",{class:"row"},[t("div",{class:"col text-end"},[t("button",{title:"Cancel",type:"button",class:"btn rounded bg-none ms-2 px-5","data-bs-dismiss":"modal"}," Cancel "),t("button",{type:"submit",title:"Submit",class:"btn rounded btn-primary ms-2 px-5 text-dark"}," Submit ")])],-1);function St(a,e,n,o,r,c){return l(),d("div",tt,[t("form",{onSubmit:e[10]||(e[10]=le(s=>o.handleSubmit(),["prevent"]))},[t("div",nt,[t("div",ot,[t("div",at,[v(t("input",{class:"form-control bg-lighter",type:"text","name:":"Name",placeholder:" Event Name...","onUpdate:modelValue":e[0]||(e[0]=s=>o.editable.name=s),required:""},null,512),[[w,o.editable.name]])])]),t("div",st,[t("div",rt,[v(t("textarea",{style:{resize:"none"},class:"form-control bg-lighter",name:"event-body",rows:"5",placeholder:"Description...","onUpdate:modelValue":e[1]||(e[1]=s=>o.editable.description=s),required:""},`\r
            `,512),[[w,o.editable.description]])])]),t("div",it,[ct,t("div",lt,[t("div",dt,[v(t("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio1",value:"concert","onUpdate:modelValue":e[2]||(e[2]=s=>o.editable.type=s),required:""},null,512),[[k,o.editable.type]]),ut]),t("div",mt,[v(t("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio2",value:"convention","onUpdate:modelValue":e[3]||(e[3]=s=>o.editable.type=s),required:""},null,512),[[k,o.editable.type]]),vt]),t("div",_t,[v(t("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio3",value:"sport","onUpdate:modelValue":e[4]||(e[4]=s=>o.editable.type=s),required:""},null,512),[[k,o.editable.type]]),pt]),t("div",gt,[v(t("input",{class:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"inlineRadio4",value:"digital","onUpdate:modelValue":e[5]||(e[5]=s=>o.editable.type=s),required:""},null,512),[[k,o.editable.type]]),bt])])]),t("div",ht,[t("div",ft,[v(t("input",{class:"form-control bg-lighter",type:"text","name:":"coverImg",placeholder:"Image Url...","onUpdate:modelValue":e[6]||(e[6]=s=>o.editable.coverImg=s),required:""},null,512),[[w,o.editable.coverImg]])])]),t("div",yt,[t("div",Et,[v(t("input",{class:"form-control bg-lighter",type:"text","name:":"Location",placeholder:" Event Location...","onUpdate:modelValue":e[7]||(e[7]=s=>o.editable.location=s),required:""},null,512),[[w,o.editable.location]])])]),t("div",wt,[t("div",Ct,[v(t("input",{class:"form-control bg-lighter",type:"number","name:":"capacity",placeholder:" Event Capacity...","onUpdate:modelValue":e[8]||(e[8]=s=>o.editable.capacity=s),required:""},null,512),[[w,o.editable.capacity]])])]),t("div",kt,[t("div",xt,[v(t("input",{class:"form-control bg-lighter",type:"date","name:":"startDate",placeholder:"Starte Date","onUpdate:modelValue":e[9]||(e[9]=s=>o.editable.startDate=s),required:""},null,512),[[w,o.editable.startDate]])])])]),Tt],32)])}var At=h(et,[["render",St]]),$t=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:At});const Dt={setup(){return{filteredEvents:p(()=>i.eventType),setEventType(a){i.eventType=a}}}},Ot={class:"navbar navbar-expand-lg navbar-dark bg-secondary px-3 elevation-2"},Rt=t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1),Pt={class:"collapse navbar-collapse",id:"navbarText"},It={class:"navbar-nav me-auto"};function Nt(a,e,n,o,r,c){return l(),d("nav",Ot,[Rt,t("div",Pt,[t("ul",It,[t("li",null,[t("button",{class:"btn text-light",onClick:e[0]||(e[0]=s=>o.setEventType("")),title:"All Events"}," All ")]),t("li",null,[t("button",{class:"btn text-light",onClick:e[1]||(e[1]=s=>o.setEventType("concert")),title:"Concert Events"}," Concert ")]),t("li",null,[t("button",{class:"btn text-light",onClick:e[2]||(e[2]=s=>o.setEventType("convention")),title:"Convention Events"}," Convention ")]),t("li",null,[t("button",{class:"btn text-light",onClick:e[3]||(e[3]=s=>o.setEventType("sport")),title:"Sport Events"}," Sport ")]),t("li",null,[t("button",{class:"btn text-light",onClick:e[4]||(e[4]=s=>o.setEventType("digital")),title:"Digital Events"}," Digital ")])])])])}var qt=h(Dt,[["render",Nt]]),Vt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:qt});const Ut={},Lt={class:"modal",tabindex:"-1"},jt={class:"modal-dialog modal-xl"},Mt={class:"modal-content bg-dark"},Ht={class:"modal-header"},Ft={class:"modal-title my-3"},Bt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",title:"Close"},null,-1),zt={class:"modal-body bg-body bg-grey"};function Yt(a,e){return l(),d("div",Lt,[t("div",jt,[t("div",Mt,[t("div",Ht,[t("h5",Ft,[H(a.$slots,"modal-title")]),Bt]),t("div",zt,[H(a.$slots,"modal-body")])])])])}var Kt=h(Ut,[["render",Yt]]),Wt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Kt});class Gt{async getAccount(){try{const e=await m.get("/account");i.account=e.data}catch(e){_.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}}const Qt=new Gt,Xt={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class Jt{constructor(e=!1,n=B){}on(e,n){var o;return(o=this.socket)==null||o.on(e,n.bind(this)),this}onConnected(e){_.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){_.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var n;(n=this.socket)==null||n.emit(Xt.authenticate,e)}onError(e){_.error("[SOCKET_ERROR]",e)}enqueue(e,n){_.log("[ENQUEING_ACTION]",{action:e,payload:n}),this.queue.push({action:e,payload:n})}playback(){_.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(n=>{this.emit(n.action,n.payload)})}emit(e,n=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,n);if(!this.connected)return this.enqueue(e,n);this.socket.emit(e,n)}}class Zt extends Jt{constructor(){super();this.on("error",this.onError)}onError(e){x.toast(e.message,"error")}}const W=new Zt,u=de({domain:he,clientId:ye,audience:fe,useRefreshTokens:!0,onRedirectCallback:a=>{P.push(a&&a.targetUrl?a.targetUrl:window.location.pathname)}});u.on(u.AUTH_EVENTS.AUTHENTICATED,async function(){m.defaults.headers.authorization=u.bearer,m.interceptors.request.use(en),i.user=u.user,await Qt.getAccount(),W.authenticate(u.bearer)});async function en(a){if(!u.isAuthenticated)return a;const e=u.identity.exp*1e3,n=e<Date.now(),o=e<Date.now()+1e3*60*60*12;return n?await u.loginWithPopup():o&&(await u.getTokenSilently(),m.defaults.headers.authorization=u.bearer,W.authenticate(u.bearer)),a}var tn="/assets/TowerLogo.0ca1fdec.png";const nn={setup(){return{user:p(()=>i.user),activeEvent:p(()=>i.activeEvent),async login(){u.loginWithPopup()},async logout(){u.logout({returnTo:window.location.origin})}}}},S=a=>(U("data-v-59e3db64"),a=a(),L(),a),on={class:"navbar navbar-expand-lg navbar-dark bg-dark px-3"},an=S(()=>t("div",{class:"d-flex flex-column align-items-center",title:"Home"},[t("img",{alt:"logo",src:tn,height:"45"})],-1)),sn=S(()=>t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1)),rn={class:"collapse navbar-collapse",id:"navbarText"},cn={class:"navbar-nav me-auto"},ln=O(" Home "),dn={key:0,"data-bs-toggle":"modal","data-bs-target":"#eventForm",title:"Create Event",class:"btn btn-outline-success me-5"},un={class:"navbar-text"},mn={key:1,class:"dropdown my-2 my-lg-0",title:"Account"},vn={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},_n=["src"],pn={class:"mx-3 text-success lighten-30"},gn={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},bn=S(()=>t("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),hn=S(()=>t("i",{class:"mdi mdi-logout"},null,-1)),fn=O(" logout "),yn=[hn,fn],En=O(" Create Event! ");function wn(a,e,n,o,r,c){const s=y("router-link"),f=y("EventForm"),A=y("Modal");return l(),d("nav",on,[g(s,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:E(()=>[an]),_:1}),sn,t("div",rn,[t("ul",cn,[t("li",null,[g(s,{to:{name:"Home"},class:"btn text-success lighten-30 selectable text-uppercase",title:"Home"},{default:E(()=>[ln]),_:1})])]),o.user.isAuthenticated?(l(),d("button",dn," Create Event ")):D("",!0),t("span",un,[o.user.isAuthenticated?(l(),d("div",mn,[t("div",vn,[t("img",{src:o.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,_n),t("span",pn,b(o.user.name),1)]),t("div",gn,[g(s,{to:{name:"Account"}},{default:E(()=>[bn]),_:1}),t("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...$)=>o.logout&&o.logout(...$))},yn)])])):(l(),d("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",title:"login",onClick:e[0]||(e[0]=(...$)=>o.login&&o.login(...$))}," Login "))])]),g(A,{id:"eventForm"},{"modal-title":E(()=>[En]),"modal-body":E(()=>[g(f)]),_:1})])}var Cn=h(nn,[["render",wn],["__scopeId","data-v-59e3db64"]]),kn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Cn});function xn(a){Object.entries({"./components/CommentComponent.vue":Ne,"./components/EventComponent.vue":We,"./components/EventForm.vue":$t,"./components/FilterComponent.vue":Vt,"./components/Modal.vue":Wt,"./components/Navbar.vue":kn}).forEach(([n,o])=>{const r=o.name||n.substr(n.lastIndexOf("/")+1).replace(/\.\w+$/,"");a.component(r,o.default)})}const G=ue(be);xn(G);G.use(P).mount("#app");export{i as A,x as P,h as _,m as a,we as c,K as e,_ as l};
